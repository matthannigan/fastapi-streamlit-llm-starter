# Phase 3 Cache Infrastructure Environment Configuration Template
# Copy this file to .env and customize for your environment

# ============================================================================
# Core Cache Configuration
# ============================================================================

# Redis Connection (required for Redis-based caches)
CACHE_REDIS_URL=redis://localhost:6379
# CACHE_REDIS_URL=rediss://your-redis-host:6380  # For TLS connections

# Basic Cache Settings
CACHE_DEFAULT_TTL=1800                    # Default TTL in seconds (30 minutes)
CACHE_MEMORY_CACHE_SIZE=200              # L1 memory cache size
CACHE_COMPRESSION_THRESHOLD=2000         # Compress values larger than this
CACHE_COMPRESSION_LEVEL=4                # Compression level (1-9)

# ============================================================================
# AI Cache Configuration (when ENABLE_AI_CACHE=true)
# ============================================================================

# Enable AI-specific cache features
ENABLE_AI_CACHE=true

# AI Cache Settings
CACHE_TEXT_HASH_THRESHOLD=1000           # Hash text longer than this
CACHE_HASH_ALGORITHM=sha256              # Hash algorithm for long texts
CACHE_MAX_TEXT_LENGTH=50000              # Maximum text length to cache
CACHE_ENABLE_SMART_PROMOTION=true        # Enable smart cache promotion

# AI Operation TTLs (JSON format)
CACHE_OPERATION_TTLS={"summarize": 3600, "sentiment": 1800, "key_points": 3600, "questions": 7200, "qa": 1800}

# AI Text Size Tiers (JSON format)
CACHE_TEXT_SIZE_TIERS={"small": 1000, "medium": 5000, "large": 20000}

# ============================================================================
# Security Configuration (for Redis TLS)
# ============================================================================

# TLS Configuration (uncomment for secure Redis connections)
# CACHE_USE_TLS=true
# CACHE_TLS_CERT_PATH=/path/to/client.crt
# CACHE_TLS_KEY_PATH=/path/to/client.key
# CACHE_TLS_CA_CERT_PATH=/path/to/ca.crt

# Redis Authentication (uncomment if needed)
# CACHE_USERNAME=cache_user
# CACHE_PASSWORD=secure_password

# ============================================================================
# Environment-Specific Presets (Alternative to individual settings)
# ============================================================================

# Use environment presets instead of individual configuration
# Uncomment ONE of the following based on your environment:

# Development Environment
# CACHE_ENVIRONMENT_PRESET=development

# Testing Environment
# CACHE_ENVIRONMENT_PRESET=testing

# Production Environment
# CACHE_ENVIRONMENT_PRESET=production

# ============================================================================
# Advanced Configuration
# ============================================================================

# Health Check Settings
HEALTH_CHECK_CACHE_TIMEOUT_MS=3000       # Cache health check timeout
HEALTH_CHECK_RETRY_COUNT=2               # Number of retries for health checks

# Monitoring and Debugging
CACHE_ENABLE_MONITORING=true             # Enable performance monitoring
CACHE_LOG_LEVEL=INFO                     # Cache-specific log level

# Testing Configuration (for development/testing only)
TEST_REDIS_URL=redis://localhost:6379/15 # Test database

# ============================================================================
# Docker Compose Variables
# ============================================================================

# These variables are used by docker-compose.yml
REDIS_PORT=6379                          # Redis port mapping for Docker
BACKEND_PORT=8000                        # Backend port mapping
FRONTEND_PORT=8501                       # Frontend port mapping

# ============================================================================
# Migration and Compatibility
# ============================================================================

# Backwards compatibility with legacy configuration
# LEGACY_CACHE_CONFIG_MIGRATION=true

# ============================================================================
# Performance Tuning
# ============================================================================

# Connection Pool Settings (for high-traffic applications)
CACHE_MAX_CONNECTIONS=50                 # Maximum Redis connections
CACHE_CONNECTION_TIMEOUT=5               # Connection timeout in seconds
CACHE_SOCKET_TIMEOUT=5                   # Socket timeout in seconds

# Batch Operation Settings
CACHE_MAX_BATCH_SIZE=100                 # Maximum batch operation size

# ============================================================================
# Example Configurations by Use Case
# ============================================================================

# Example 1: Simple Web Application
# CACHE_ENVIRONMENT_PRESET=development
# ENABLE_AI_CACHE=false

# Example 2: AI-Powered Application  
# CACHE_ENVIRONMENT_PRESET=production
# ENABLE_AI_CACHE=true
# CACHE_TEXT_HASH_THRESHOLD=1000
# CACHE_OPERATION_TTLS={"summarize": 3600, "sentiment": 1800}

# Example 3: High-Performance Setup
# CACHE_REDIS_URL=redis://redis-cluster:6379
# CACHE_MEMORY_CACHE_SIZE=1000
# CACHE_COMPRESSION_LEVEL=6
# CACHE_MAX_CONNECTIONS=100

# Example 4: Secure Production Setup
# CACHE_REDIS_URL=rediss://secure-redis:6380
# CACHE_USE_TLS=true
# CACHE_USERNAME=prod_cache_user
# CACHE_PASSWORD=secure_production_password
# CACHE_ENVIRONMENT_PRESET=production