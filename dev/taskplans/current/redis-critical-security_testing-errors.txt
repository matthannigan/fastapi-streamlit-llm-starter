üß™ Running backend cache infrastructure unit tests...
bringing up nodes...
................................................................................................................................................F...F.................F.F.. [ 33%]
........................F.............F..............F......F..F.........F.....F.................................F......................................................... [ 66%]
.........F.........................................F............F.F.........................................................................F.F............................ [ 99%]
.F.F                                                                                                                                                                        [100%]
============================================================================= short test summary info =============================================================================
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityConfigurationTesting::test_security_configuration_testing_basic - AssertionError: assert 'recommendations' in {'authentication_working': False, 'configuration_valid': True, 'connection_successful': False, 'encryption_active': False, ...}
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_security_level_classification[config_params3-HIGH] - AssertionError: assert 'MEDIUM' == 'HIGH'
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityReporting::test_generate_security_report_basic_config - AssertionError: assert ('none' in 'no security validation data available. run validate_connection_security() first.' or 'not configured' in 'no security validation data avail...
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_security_recommendations_for_unsecured_cache - AssertionError: assert ('tls' in '‚ö†Ô∏è enable certificate verification to prevent mitm attacks üåê deploy redis in a private network or vpn üî• configure fir...on attempts üîÑ regu...
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_security_status_data_completeness - AssertionError: assert 'MEDIUM' == 'HIGH'
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_get_security_status_with_security_config - AssertionError: assert 'MEDIUM' == 'HIGH'
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_security_level_classification[config_params0-LOW] - AssertionError: assert 'MEDIUM' == 'LOW'
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityValidation::test_validate_security_without_security_manager - assert SecurityValidationResult(is_secure=False, auth_configured=True, tls_enabled=True, acl_enabled=False, certificate_valid...ks={}, connection_encrypted=False, auth_method...
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_security_recommendations_generation - assert False
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_security_level_classification[config_params4-HIGH] - AssertionError: assert 'MEDIUM' == 'HIGH'
FAILED tests/unit/cache/redis_generic/test_security_features.py::TestSecurityStatusManagement::test_get_security_status_without_security_config - AssertionError: assert 'security_enabled' in {'configuration': {'acl_configured': False, 'certificate_verification': False, 'connection_timeout': 20, 'has_authentication': Tr...
FAILED tests/unit/cache/redis_generic/test_core_cache_operations.py::TestDataCompressionIntegration::test_compression_data_integrity - AssertionError: assert None == {'content': 'This is repetitive content. This is repetitive content. This is repetitive content. This is repetitive co...', 'data': ['repeated_...
FAILED tests/unit/cache/redis_generic/test_core_cache_operations.py::TestDataCompressionIntegration::test_compression_threshold_behavior - AssertionError: assert None == {'content': 'Large document content Large document content Large document content Large document content Large documen...ue': 'item_3'}, {'id':...
FAILED tests/unit/cache/redis_generic/test_initialization_and_connection.py::TestSecurityIntegration::test_fallback_without_security_manager - AssertionError: assert SecurityConfig(redis_auth='qU_*$Y13t%5L75o4', acl_username=None, acl_password=None, use_tls=True, tls_cert_path='', tl...meout=20, socket_timeout=20, m...
FAILED tests/unit/cache/redis_generic/test_initialization_and_connection.py::TestRedisConnectionManagement::test_reconnection_behavior - assert None == True
FAILED tests/unit/cache/redis_generic/test_initialization_and_connection.py::TestGenericRedisCacheInitialization::test_custom_configuration_initialization - assert False == True
FAILED tests/unit/cache/redis_generic/test_core_cache_operations.py::TestDataCompressionIntegration::test_small_value_no_compression - AssertionError: assert None == {'created_at': '2023-01-01T12:00:00Z', 'email': 'john@example.com', 'name': 'John Doe', 'preferences': {'language': 'en', 'theme': 'dark'}, ...}
FAILED tests/unit/cache/redis_generic/test_core_cache_operations.py::TestDataCompressionIntegration::test_mixed_compression_scenarios - AssertionError: assert None == {'created_at': '2023-01-01T12:00:00Z', 'email': 'john@example.com', 'name': 'John Doe', 'preferences': {'language': 'en', 'theme': 'dark'}, ...}
FAILED tests/unit/cache/redis_generic/test_initialization_and_connection.py::TestGenericRedisCacheInitialization::test_security_configuration_initialization - AssertionError: assert '_Xq$j9tYRaz%4$pV' == 'secure_password'
FAILED tests/unit/cache/redis_generic/test_initialization_and_connection.py::TestSecurityIntegration::test_security_configuration_validation - AssertionError: assert '*xZ97@A_r1yrKNoe' == 'test_password'
make[1]: *** [test-backend-cache-unit] Error 1
make: [test-backend-cache] Error 2 (ignored)
üß™ Running backend cache infrastructure integration tests...
..................RFRF.RFE..RF............                                                                                                                                  [100%]

======================================================================== the following tests were retried =========================================================================
	test_cache_shared_contract_data_types failed on attempt 1! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 697, in test_cache_shared_contract_data_types
	    assert retrieved == test_value, f"Data type {data_type} failed for {cache_name}"
	AssertionError: Data type string failed for real_redis
	assert None == 'test string value'

	test_cache_shared_contract_data_types failed on attempt 2! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 697, in test_cache_shared_contract_data_types
	    assert retrieved == test_value, f"Data type {data_type} failed for {cache_name}"
	AssertionError: Data type string failed for real_redis
	assert None == 'test string value'

	test_cache_shared_contract_data_types failed on attempt 3! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 697, in test_cache_shared_contract_data_types
	    assert retrieved == test_value, f"Data type {data_type} failed for {cache_name}"
	AssertionError: Data type string failed for real_redis
	assert None == 'test string value'

	test_cache_shared_contract_data_types failed after 4 attempts!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 697, in test_cache_shared_contract_data_types
	    assert retrieved == test_value, f"Data type {data_type} failed for {cache_name}"
	AssertionError: Data type string failed for real_redis
	assert None == 'test string value'

	test_factory_testing_database_isolation_with_testcontainers failed on attempt 1! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 149, in test_factory_testing_database_isolation_with_testcontainers
	    assert isinstance(cache_with_default_url, GenericRedisCache), f"Expected GenericRedisCache, got {type(cache_with_default_url)}"
	AssertionError: Expected GenericRedisCache, got <class 'app.infrastructure.cache.memory.InMemoryCache'>
	assert False
	 +  where False = isinstance(<app.infrastructure.cache.memory.InMemoryCache object at 0x1074ffbf0>, <class 'app.infrastructure.cache.redis_generic.GenericRedisCache'>)

	test_factory_testing_database_isolation_with_testcontainers failed on attempt 2! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 149, in test_factory_testing_database_isolation_with_testcontainers
	    assert isinstance(cache_with_default_url, GenericRedisCache), f"Expected GenericRedisCache, got {type(cache_with_default_url)}"
	AssertionError: Expected GenericRedisCache, got <class 'app.infrastructure.cache.memory.InMemoryCache'>
	assert False
	 +  where False = isinstance(<app.infrastructure.cache.memory.InMemoryCache object at 0x1076d5e20>, <class 'app.infrastructure.cache.redis_generic.GenericRedisCache'>)

	test_factory_testing_database_isolation_with_testcontainers failed on attempt 3! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 149, in test_factory_testing_database_isolation_with_testcontainers
	    assert isinstance(cache_with_default_url, GenericRedisCache), f"Expected GenericRedisCache, got {type(cache_with_default_url)}"
	AssertionError: Expected GenericRedisCache, got <class 'app.infrastructure.cache.memory.InMemoryCache'>
	assert False
	 +  where False = isinstance(<app.infrastructure.cache.memory.InMemoryCache object at 0x1076d62a0>, <class 'app.infrastructure.cache.redis_generic.GenericRedisCache'>)

	test_factory_testing_database_isolation_with_testcontainers failed after 4 attempts!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 149, in test_factory_testing_database_isolation_with_testcontainers
	    assert isinstance(cache_with_default_url, GenericRedisCache), f"Expected GenericRedisCache, got {type(cache_with_default_url)}"
	AssertionError: Expected GenericRedisCache, got <class 'app.infrastructure.cache.memory.InMemoryCache'>
	assert False
	 +  where False = isinstance(<app.infrastructure.cache.memory.InMemoryCache object at 0x1076d6600>, <class 'app.infrastructure.cache.redis_generic.GenericRedisCache'>)

	test_cache_shared_contract_basic_operations failed on attempt 1! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 629, in test_cache_shared_contract_basic_operations
	    assert retrieved == test_value, f"get() failed for {cache_name}"
	AssertionError: get() failed for real_redis
	assert None == {'cache_type': 'real_redis', 'contract_test': True}

	test_cache_shared_contract_basic_operations failed on attempt 2! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 629, in test_cache_shared_contract_basic_operations
	    assert retrieved == test_value, f"get() failed for {cache_name}"
	AssertionError: get() failed for real_redis
	assert None == {'cache_type': 'real_redis', 'contract_test': True}

	test_cache_shared_contract_basic_operations failed on attempt 3! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 629, in test_cache_shared_contract_basic_operations
	    assert retrieved == test_value, f"get() failed for {cache_name}"
	AssertionError: get() failed for real_redis
	assert None == {'cache_type': 'real_redis', 'contract_test': True}

	test_cache_shared_contract_basic_operations failed after 4 attempts!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 629, in test_cache_shared_contract_basic_operations
	    assert retrieved == test_value, f"get() failed for {cache_name}"
	AssertionError: get() failed for real_redis
	assert None == {'cache_type': 'real_redis', 'contract_test': True}

	test_cache_shared_contract_ttl_behavior failed on attempt 1! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 659, in test_cache_shared_contract_ttl_behavior
	    assert retrieved == test_value, f"TTL set/get failed for {cache_name}"
	AssertionError: TTL set/get failed for real_redis
	assert None == {'cache_type': 'real_redis', 'ttl_test': True}

	test_cache_shared_contract_ttl_behavior failed on attempt 2! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 659, in test_cache_shared_contract_ttl_behavior
	    assert retrieved == test_value, f"TTL set/get failed for {cache_name}"
	AssertionError: TTL set/get failed for real_redis
	assert None == {'cache_type': 'real_redis', 'ttl_test': True}

	test_cache_shared_contract_ttl_behavior failed on attempt 3! Retrying!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 659, in test_cache_shared_contract_ttl_behavior
	    assert retrieved == test_value, f"TTL set/get failed for {cache_name}"
	AssertionError: TTL set/get failed for real_redis
	assert None == {'cache_type': 'real_redis', 'ttl_test': True}

	test_cache_shared_contract_ttl_behavior failed after 4 attempts!
	Traceback (most recent call last):
	  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
	    return future.result()
	           ~~~~~~~~~~~~~^^
	  File "/Users/matth/Github/MGH/fastapi-streamlit-llm-starter/backend/tests/integration/cache/test_cache_integration.py", line 659, in test_cache_shared_contract_ttl_behavior
	    assert retrieved == test_value, f"TTL set/get failed for {cache_name}"
	AssertionError: TTL set/get failed for real_redis
	assert None == {'cache_type': 'real_redis', 'ttl_test': True}

============================================================================ end of test retry report =============================================================================

============================================================================= short test summary info =============================================================================
FAILED tests/integration/cache/test_cache_integration.py::TestCacheComponentInteroperability::test_cache_shared_contract_data_types - AssertionError: Data type string failed for real_redis
FAILED tests/integration/cache/test_cache_integration.py::TestCacheFactoryIntegration::test_factory_testing_database_isolation_with_testcontainers - AssertionError: Expected GenericRedisCache, got <class 'app.infrastructure.cache.memory.InMemoryCache'>
FAILED tests/integration/cache/test_cache_integration.py::TestCacheComponentInteroperability::test_cache_shared_contract_basic_operations - AssertionError: get() failed for real_redis
FAILED tests/integration/cache/test_cache_integration.py::TestCacheComponentInteroperability::test_cache_shared_contract_ttl_behavior - AssertionError: TTL set/get failed for real_redis
make[1]: *** [test-backend-cache-integration] Error 1
make: [test-backend-cache] Error 2 (ignored)
üß™ Running backend cache infrastructure E2E tests...
......................ss.......                                                                                                                                             [100%]
============================================================================= short test summary info =============================================================================
SKIPPED [1] tests/e2e/cache/test_cache_monitoring_workflow.py:329: Metrics endpoint unavailable - skipping precise metrics test
SKIPPED [1] tests/e2e/cache/test_cache_invalidation_workflow.py:337: Unable to populate sufficient cache entries for behavioral test - may need AI API key